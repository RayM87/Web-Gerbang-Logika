<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Gerbang Logika</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .calculator {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        h1 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #333;
        }
        input[type="text"] {
            width: calc(100% - 24px);
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #007bff;
            border-radius: 10px;
            text-align: center;
            font-size: 16px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        input[type="text"]:focus {
            border-color: #0056b3;
            box-shadow: 0 0 5px rgba(0, 86, 179, 0.5);
            outline: none;
        }
        button {
            width: calc(100% - 24px);
            padding: 12px;
            margin: 10px 0;
            border: none;
            background-color: #007bff;
            color: white;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        .result {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }
        .error {
            color: red;
            font-size: 16px;
        }
        .instructions {
            font-size: 14px;
            margin-top: 10px;
            color: #666;
            text-align: left;
        }
        .variable {
            display: flex;
            justify-content: center;
            margin: 5px 0;
        }
        .variable label {
            margin: 0 10px;
        }
    </style>
</head>
<body>

    <div class="calculator">
        <h1>Kalkulator Gerbang Logika</h1>
        <input type="text" id="inputExpression" placeholder="Masukkan ekspresi" required>
        <div id="variableInputs"></div>
        <button onclick="calculate()">Hitung</button>
        <div class="result" id="result">Hasil: </div>
        <div class="error" id="error"></div>
        <div class="instructions">
            Simbol Input Gerbang Logika:<br>
            - && = AND<br>
            - || = OR<br>
            - ! = NOT<br>
            - ^ = XOR<br>
            - !& = NAND<br>
            - !| = NOR<br>
            - !^ = XNOR<br>
            <br>
            Contoh: A && B, A || C, !A, (A && B) || !C, A ^ B, !& (A && B)
        </div>
    </div>

    <script>
        document.getElementById('inputExpression').addEventListener('input', updateVariableInputs);

        function updateVariableInputs() {
            const expression = document.getElementById('inputExpression').value;
            const variableInputsDiv = document.getElementById('variableInputs');
            variableInputsDiv.innerHTML = ''; // Reset variable inputs

            // Ambil semua variabel unik dari ekspresi
            const variables = [...new Set(expression.match(/[A-Z]/g))];

            // Buat kontrol radio untuk setiap variabel
            for (let variable of variables) {
                const variableDiv = document.createElement('div');
                variableDiv.classList.add('variable');
                variableDiv.innerHTML = `
                    <span>${variable}:</span>
                    <label><input type="radio" name="${variable}" value="0" checked> 0</label>
                    <label><input type="radio" name="${variable}" value="1"> 1</label>
                `;
                variableInputsDiv.appendChild(variableDiv);
            }
        }

        function calculate() {
            const expression = document.getElementById('inputExpression').value;
            let result;
            document.getElementById('error').innerText = ''; // Reset error message

            try {
                // Ambil nilai dari kontrol radio
                const variables = [...new Set(expression.match(/[A-Z]/g))];
                const values = {};

                for (let variable of variables) {
                    const selectedValue = document.querySelector(`input[name="${variable}"]:checked`).value;
                    values[variable] = selectedValue;
                }

                // Ganti variabel dalam ekspresi
                let evalExpression = expression;
                for (let variable in values) {
                    evalExpression = evalExpression.replace(new RegExp(variable, 'g'), values[variable]);
                }

                // Hitung hasil menggunakan eval
                result = eval(evalExpression);
                result = result ? 1 : 0; // Mengubah hasil ke 0 atau 1
            } catch (error) {
                result = null; // Menyimpan hasil null jika ada error
                document.getElementById('error').innerText = "Error: " + error.message;
            }

            if (result !== null) {
                document.getElementById('result').innerText = 'Hasil: ' + result;
            }
        }
    </script>

</body>
</html>
